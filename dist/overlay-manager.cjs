let e=Symbol("clean"),t=[],n=0,r=r=>{let o,s=[],i={lc:0,value:r,set(e){i.value=e,i.notify()},get:()=>(i.lc||i.listen(()=>{})(),i.value),notify(e){o=s;let r=!t.length;for(let n=0;n<o.length;n++)t.push(o[n],i.value,e);if(r){n++;for(let e=0;e<t.length;e+=3)t[e](t[e+1],t[e+2]);t.length=0}},listen:e=>(s===o&&(s=s.slice()),i.lc=s.push(e),()=>{s===o&&(s=s.slice());let t=s.indexOf(e);~t&&(s.splice(t,1),i.lc--,i.lc||i.off())}),subscribe(e){let t=i.listen(e);return e(i.value),t},off(){}};return"production"!==process.env.NODE_ENV&&(i[e]=()=>{s=[],i.lc=0,i.off()}),i},o=(t,o)=>{let s;Array.isArray(t)||(t=[t]);let i=[],l=()=>{let e=t.map(e=>e.get());(s!==n||e.some((e,t)=>e!==i[t]))&&(s=n,i=e,u.set(o(...e)))},u=r();var c,f,v,a,p;return f=()=>{let e=t.map(e=>e.listen(l,o));return l(),()=>{for(let t of e)t()}},a=e=>{let t=f();t&&c.events[6].push(t)},p=t=>{let n=c.listen;c.listen=e=>(c.lc||c.active||(t(),c.active=!0),n(e));let r=c.off;if(c.events[6]=[],c.off=()=>{setTimeout(()=>{if(c.active&&!c.lc){c.active=!1;for(let e of c.events[6])e();c.events[6]=[],r()}},1e3)},"production"!==process.env.NODE_ENV){let t=c[e];c[e]=()=>{for(let e of c.events[6])e();c.events[6]=[],c.active=!1,t()}}return()=>{c.listen=n,c.off=r}},(v=c=u).events=v.events||{},v.events[15]||(v.events[15]=p(e=>{v.events[5].reduceRight((e,t)=>(t(e),e),{shared:{},...e})})),v.events[5]=v.events[5]||[],v.events[5].push(a),u};function s(){var e={isResolved:!1,resolve:null,reject:null},t=new Promise(function(t,n){e.resolve=function(n){e.isResolved=!0,t(n)},e.reject=function(t){e.isResolved=!0,n(t)}});return[Object.assign(t,{innerPromise:t,get isResolved(){return e.isResolved}}),e]}var i=r([]);function l(e){var t=i.get();return t.unshift(e),i.set(t),function(){u(e)}}function u(e){var t=i.get();i.set(t.filter(function(t){return t!==e}))}function c(e){if("Escape"===e.key&&!e.repeat)for(var t=i.get(),n=0;n<t.length;n++)if(!0===(0,t[n])(e)){e.preventDefault(),e.stopPropagation();break}}o(i,function(e){return e.length>0}).subscribe(function(e){e?window.addEventListener("keydown",c):window.removeEventListener("keydown",c)}),exports.createDeferred=s,exports.createOverlayManager=function(e,t){void 0===t&&(t=null);var n=r([]),i=o(n,function(e){return e.length>0}),u=o(n,function(e){return e[e.length-1]}),c=o(n,function(e){return e}),f=l(function(e){var n=u.get();n&&n.returnValue(null,t)});return{name:e,isActive:i,topmost:u,show:function(e,r,i){try{var l=function(e){return e()},c=Date.now().toString(36),f=o(u,function(e){return(null==e?void 0:e.id)===c}),v=s(),a=v[0],p=v[1],d={id:c,view:e,params:r,options:i,isTopmost:f,returnValue:function(e,r){l(function(){r||r===t?p.reject(r):p.resolve(e),n.set([].concat(n.get().filter(function(e){return e.id!==c})))})},onRequestClose:function(e){l=e}};return n.set([].concat(n.get(),[d])),Promise.resolve(a.innerPromise)}catch(e){return Promise.reject(e)}},stopEscListening:f,overlays:c}},exports.removeEscHandler=u,exports.useEscHandler=l;
